@import url('https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap');

/* ─── Reset ──────────────────────────────────────────────── */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ─── Variables ──────────────────────────────────────────── */
:root {
  --bg:           #060912;
  --surface:      rgba(13, 17, 32, 0.82);
  --surface-2:    rgba(19, 25, 41, 0.9);
  --surface-3:    #1a2235;
  --border:       rgba(255, 255, 255, 0.07);
  --border-focus: rgba(167, 139, 250, 0.38);
  --text:         #e2e8f0;
  --text-2:       #7c8fa6;
  --accent-1:     #a78bfa;
  --accent-2:     #38bdf8;
  --user-grad:    linear-gradient(135deg, #6d28d9 0%, #1d4ed8 100%);
  --ai-bg:        rgba(13, 17, 32, 0.9);
  --radius:       18px;
  --font:         'Sora', sans-serif;
  --mono:         'JetBrains Mono', monospace;
  --shadow-glow:  0 0 40px rgba(109, 40, 217, 0.18);
}

/* ─── Body / Root ────────────────────────────────────────── */
body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  min-height: 100dvh;
  overflow: hidden;
}

/* ─── Shell (full screen container) ─────────────────────── */
.shell {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: flex-start;  /* chat on LEFT, robot on RIGHT */
  padding: 20px 20px 20px 40px;
}

/* ─── Ambient Background Orbs ────────────────────────────── */
.bg-orb {
  position: fixed;
  border-radius: 50%;
  filter: blur(90px);
  opacity: 0.14;
  pointer-events: none;
  animation: drift 16s ease-in-out infinite alternate;
  z-index: 0;
}
.bg-orb--1 {
  width: 540px; height: 540px;
  background: #7c3aed;
  top: -140px; left: -120px;
  animation-delay: 0s;
}
.bg-orb--2 {
  width: 400px; height: 400px;
  background: #0ea5e9;
  bottom: -100px; right: -100px;
  animation-delay: -6s;
}
.bg-orb--3 {
  width: 280px; height: 280px;
  background: #a78bfa;
  top: 45%; left: 42%;
  animation-delay: -11s;
}

@keyframes drift {
  from { transform: translate(0, 0) scale(1); }
  to   { transform: translate(28px, 18px) scale(1.09); }
}

/* ─── Chat Window ────────────────────────────────────────── */
.window {
  position: relative;
  z-index: 10;
  width: 100%;
  max-width: 600px;
  height: min(88vh, 800px);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 26px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow:
    0 0 0 1px rgba(167, 139, 250, 0.06),
    0 28px 90px rgba(0, 0, 0, 0.65),
    inset 0 1px 0 rgba(255, 255, 255, 0.05),
    var(--shadow-glow);
  backdrop-filter: blur(28px);
  -webkit-backdrop-filter: blur(28px);
  animation: windowIn .6s cubic-bezier(.22,1,.36,1) both;
}

@keyframes windowIn {
  from { opacity: 0; transform: translateY(24px) scale(0.97); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* ─── Header ─────────────────────────────────────────────── */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 22px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(167, 139, 250, 0.05) 0%, transparent 100%);
  flex-shrink: 0;
}

.header__left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.logo {
  width: 38px;
  height: 38px;
  flex-shrink: 0;
  filter: drop-shadow(0 0 8px rgba(167, 139, 250, 0.5));
}

.header__title {
  font-size: 15px;
  font-weight: 600;
  letter-spacing: -0.01em;
  background: linear-gradient(90deg, #a78bfa, #38bdf8);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.header__sub {
  font-size: 11px;
  color: var(--text-2);
  display: flex;
  align-items: center;
  gap: 5px;
  margin-top: 2px;
}

/* Status dot */
.status-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  flex-shrink: 0;
}
.status-dot--on {
  background: #34d399;
  box-shadow: 0 0 7px #34d399;
  animation: statusPulse 2.2s ease-in-out infinite;
}
.status-dot--off {
  background: #f87171;
}

@keyframes statusPulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.35; }
}

/* Icon buttons */
.icon-btn {
  width: 34px;
  height: 34px;
  background: var(--surface-3);
  border: 1px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  color: var(--text-2);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color .2s, background .2s, transform .15s;
}
.icon-btn svg { width: 16px; height: 16px; }
.icon-btn:hover {
  color: var(--text);
  background: var(--surface-2);
  transform: scale(1.05);
}
.icon-btn:active { transform: scale(0.95); }

/* ─── Messages Area ──────────────────────────────────────── */
.messages {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 20px 20px 8px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  scroll-behavior: smooth;
}

/* Scrollbar */
.messages::-webkit-scrollbar        { width: 3px; }
.messages::-webkit-scrollbar-track  { background: transparent; }
.messages::-webkit-scrollbar-thumb  { background: var(--surface-3); border-radius: 4px; }

/* ─── Message Row ────────────────────────────────────────── */
.msg-row {
  display: flex;
  align-items: flex-end;
  gap: 9px;
  animation: msgIn .28s cubic-bezier(.22,1,.36,1) both;
}
.msg-row--user { flex-direction: row-reverse; }

@keyframes msgIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ─── Avatars ────────────────────────────────────────────── */
.avatar {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 600;
}

.avatar--ai {
  background: linear-gradient(135deg, #3b0764, #1e3a5f);
  border: 1px solid rgba(167, 139, 250, 0.3);
  color: var(--accent-1);
}
.avatar--ai svg { width: 15px; height: 15px; }

.avatar--user {
  background: var(--user-grad);
  color: #fff;
  box-shadow: 0 2px 10px rgba(109, 40, 217, 0.4);
}

/* ─── Bubbles ────────────────────────────────────────────── */
.bubble {
  max-width: min(72%, 520px);
  padding: 11px 15px;
  border-radius: var(--radius);
  font-size: 14px;
  line-height: 1.68;
  position: relative;
  word-break: break-word;
}

.bubble--user {
  background: var(--user-grad);
  color: #fff;
  border-bottom-right-radius: 5px;
  box-shadow: 0 4px 22px rgba(109, 40, 217, 0.38);
}

.bubble--ai {
  background: var(--ai-bg);
  color: var(--text);
  border: 1px solid var(--border);
  border-bottom-left-radius: 5px;
  box-shadow: 0 2px 14px rgba(0, 0, 0, 0.3);
}

.bubble__time {
  display: block;
  text-align: right;
  font-size: 10px;
  margin-top: 5px;
  opacity: 0.4;
}

/* Inline code */
.inline-code {
  font-family: var(--mono);
  font-size: 12.5px;
  background: rgba(167, 139, 250, 0.14);
  color: var(--accent-1);
  padding: 1px 5px;
  border-radius: 4px;
}

/* ─── Typing Indicator ───────────────────────────────────── */
.typing-indicator {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 3px 0;
}

.typing-indicator span {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--accent-1);
  opacity: 0.35;
  animation: blink 1.3s ease-in-out infinite;
}
.typing-indicator span:nth-child(2) { animation-delay: .18s; }
.typing-indicator span:nth-child(3) { animation-delay: .36s; }

@keyframes blink {
  0%, 80%, 100% { opacity: 0.2;  transform: scale(0.88); }
  40%            { opacity: 1.0;  transform: scale(1.18); }
}

/* ─── Composer / Input Area ──────────────────────────────── */
.composer {
  padding: 12px 16px 15px;
  border-top: 1px solid var(--border);
  background: linear-gradient(0deg, rgba(6, 9, 18, 0.5) 0%, transparent 100%);
  flex-shrink: 0;
}

.composer__box {
  display: flex;
  align-items: flex-end;
  gap: 10px;
  background: var(--surface-2);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 10px 12px;
  transition: border-color .22s, box-shadow .22s;
}

.composer__box:focus-within {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px rgba(167, 139, 250, 0.09);
}

.composer__input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  color: var(--text);
  font-family: var(--font);
  font-size: 14px;
  line-height: 1.58;
  resize: none;
  max-height: 140px;
  min-height: 24px;
}
.composer__input::placeholder { color: var(--text-2); }
.composer__input:disabled      { opacity: 0.45; }

/* Send button */
.send-btn {
  width: 36px;
  height: 36px;
  border-radius: 12px;
  border: none;
  background: var(--surface-3);
  color: var(--text-2);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  flex-shrink: 0;
  transition: background .2s, color .2s, transform .14s, box-shadow .2s;
}
.send-btn svg { width: 15px; height: 15px; }

.send-btn--active {
  background: linear-gradient(135deg, #7c3aed, #1d4ed8);
  color: #fff;
  box-shadow: 0 4px 18px rgba(109, 40, 217, 0.48);
}
.send-btn--active:hover  { transform: scale(1.07); }
.send-btn--active:active { transform: scale(0.94); }
.send-btn:disabled       { opacity: 0.38; cursor: not-allowed; }

.composer__hint {
  font-size: 10px;
  color: var(--text-2);
  text-align: center;
  margin-top: 9px;
  opacity: 0.42;
}

/* ─── Responsive ─────────────────────────────────────────── */
@media (max-width: 768px) {
  .shell   { padding: 0; justify-content: center; }
  .window  { border-radius: 0; height: 100dvh; max-width: 100%; }
  .bubble  { max-width: 87%; }
  .header  { padding: 14px 16px; }
  .messages { padding: 14px 14px 6px; }
}